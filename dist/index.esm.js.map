{"version":3,"file":"index.esm.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/components/LinkPreview/Skeleton.tsx","../src/components/LinkPreview/LinkPreview.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport LoadingSkeleton from 'react-loading-skeleton';\n\nimport './skeleton.scss';\n\ninterface SkeletonProps {\n  width?: string | number;\n  imageHeight?: string | number;\n  margin?: string | number;\n}\n\nconst Skeleton: React.FC<SkeletonProps> = ({ width = '100%', imageHeight = '30vh', margin }) => {\n  return (\n    <div className='skeleton-container' style={{ width, margin }}>\n      <LoadingSkeleton width={width} height={imageHeight} />\n      <div className='skeleton-lower-container'>\n        <LoadingSkeleton count={3} />\n      </div>\n    </div>\n  );\n};\n\nexport default Skeleton;\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport './linkPreview.scss';\nimport Skeleton from './Skeleton';\n\nconst proxyLink = 'https://rlp-proxy.herokuapp.com/v2?url=';\n\nexport interface LinkPreviewProps {\n  url: string;\n  className?: string;\n  width?: string | number;\n  height?: string | number;\n  descriptionLength?: number;\n  borderRadius?: string | number;\n  imageHeight?: string | number;\n  textAlign?: 'left' | 'right' | 'center';\n  margin?: string | number;\n  fallback?: JSX.Element[] | JSX.Element | null;\n  backgroundColor?: string;\n  primaryTextColor?: string;\n  secondaryTextColor?: string;\n  borderColor?: string;\n  showLoader?: boolean;\n  customLoader?: JSX.Element[] | JSX.Element | null;\n}\n\nexport interface APIResponse {\n  title: string | null;\n  description: string | null;\n  image: string | null;\n  siteName: string | null;\n  hostname: string | null;\n}\n\nexport const LinkPreview: React.FC<LinkPreviewProps> = ({\n  url,\n  className = '',\n  width,\n  height,\n  descriptionLength,\n  borderRadius,\n  imageHeight,\n  textAlign,\n  margin,\n  fallback = null,\n  backgroundColor = 'white',\n  primaryTextColor = 'black',\n  secondaryTextColor = 'rgb(100, 100, 100)',\n  borderColor = '#ccc',\n  showLoader = true,\n  customLoader = null,\n}) => {\n  const _isMounted = useRef(true);\n  const [metadata, setMetadata] = useState<APIResponse | null>();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    _isMounted.current = true;\n    setLoading(true);\n    fetch(proxyLink + url)\n      .then((res) => res.json())\n      .then((res) => {\n        const meta: APIResponse = res.metadata;\n        if (_isMounted.current) {\n          if (!!meta.image?.match(/https?:\\/\\//)) {\n            const url_ = new URL(image as string, url);\n            meta.image = url_.href;\n          }\n          if (meta.image == \"https://rlp-proxy.herokuapp.com/img-placeholder.jpg\") {\n            meta.image = null\n          };\n          console.log(meta)\n          setMetadata(meta);\n          setLoading(false);\n        }\n      })\n      .catch((err: Error) => {\n        console.error(err);\n        console.error('No metadata could be found for the given URL.');\n        if (_isMounted.current) {\n          setMetadata(null);\n          setLoading(false);\n        }\n      });\n\n    return () => {\n      _isMounted.current = false;\n    };\n  }, [url]);\n\n  if (loading && showLoader) {\n    if (customLoader) {\n      return <>{customLoader}</>;\n    } else {\n      return <Skeleton width={width} imageHeight={imageHeight} margin={margin} />;\n    }\n  }\n\n  if (!metadata) {\n    return <>{fallback}</>;\n  }\n  \n  const { image, description, title, siteName, hostname } = metadata;\n\n  const onClick = () => {\n    window.open(url, '_blank');\n  };\n\n  console.log(image);\n\n  return (\n    <div\n      data-testid='container'\n      onClick={onClick}\n      className={`Container ${className}`}\n      style={{ width, height, borderRadius, textAlign, margin, backgroundColor, borderColor }}\n    >\n      {image && (\n        <div\n        data-testid='image-container'\n        style={{\n          borderTopLeftRadius: borderRadius,\n          borderTopRightRadius: borderRadius,\n          backgroundImage: `url(${image})`,\n          height: imageHeight,\n        }}\n        className='Image'\n      ></div>\n      )}\n      <div className='LowerContainer'>\n        <h3 data-testid='title' className='Title' style={{ color: primaryTextColor }}>\n          {title}\n        </h3>\n        {description && (\n          <span\n            data-testid='desc'\n            className='Description Secondary'\n            style={{ color: secondaryTextColor }}\n          >\n            {descriptionLength\n              ? description.length > descriptionLength\n                ? description.slice(0, descriptionLength) + '...'\n                : description\n              : description}\n          </span>\n        )}\n        <div className='Secondary SiteDetails' style={{ color: secondaryTextColor }}>\n          {siteName && <span>{siteName} â€¢ </span>}\n          <span>{hostname}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Skeleton","width","imageHeight","margin","React","className","LoadingSkeleton","height","count","LinkPreview","url","descriptionLength","borderRadius","textAlign","fallback","backgroundColor","primaryTextColor","secondaryTextColor","borderColor","showLoader","customLoader","_isMounted","useRef","metadata","setMetadata","useState","loading","setLoading","useEffect","current","fetch","then","res","json","meta","image","match","url_","URL","href","console","log","catch","err","error","description","title","siteName","hostname","onClick","window","open","borderTopLeftRadius","borderTopRightRadius","backgroundImage","color","length","slice"],"mappings":"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"}